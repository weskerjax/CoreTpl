
@{
	ViewBag.Title = "角色列表";
	string tableListId = "RoleList";

	Dictionary<string, string> actItems = OrionUtils.EnumToDictionary<ACT>();

	Pagination<RoleDomain> pagination = ViewBag.Pagination;
	IHtmlHelper<RoleDomain> pageHtml = Html.PropertyHelper(pagination);

    bool canEdit = User.AnyAct(ACT.STK_RoleSetting);
	
}

@section Styles {
}


@section Scripts {
}


<div class="page-header" ext-horizontal-fix="">
	<h1>@ViewBag.Title</h1>
</div>


@using (Html.BeginForm(null, null, FormMethod.Get, new { id = "SearchForm", @class = "well btn-toolbar", ext_horizontal_fix = "" }))
{
	<div class="toolbar-left">
		@if (canEdit)
		{ <a class="btn btn-success btn-sm" href="@Url.Action("Create")"><i class="fa fa-plus fa-lg"></i> 新增</a> }
		else
		{ <b class="btn btn-success btn-sm disabled" title="權限不足"><i class="fa fa-plus fa-lg"></i> 新增</b> }
	</div>

	<div class="toolbar-left input-group input-group-sm" style="width: 300px;">
		@Html.BsTextBox("keyword", null, new { placeholder = "關鍵字" })
		<div class="input-group-btn">
			<button type="submit" class="btn btn-primary btn-sm"><i class="fa fa-search fa-lg"></i> 搜尋</button>
		</div>
	</div>

    <div class="toolbar-left hidden-xs hidden-sm">		
        @await Html.OrderableBtn(tableListId)
        @await Html.SortBuilderBtn(tableListId)
    </div>


	@await Html.PageSizeChange(pagination)
}



<div id="@tableListId">
	<table class="table table-striped table-bordered table-condensed table-nowrap table-hover">
		<thead ext-table-fix="">
			<tr class="head">
				<th class="min"></th>
				<th class="RoleName min">@pageHtml.PagerSortFor(x => x.RoleName)</th>
				<th class="AllowActList">@pageHtml.DisplayNameFor(x => x.AllowActList)</th>
				<th class="UserIds">@pageHtml.DisplayNameFor(x => x.UserIds)</th>
				<th class="Statu mins">@pageHtml.PagerSortFor(x => x.UseStatus)</th>
			</tr>
		</thead>
		<tbody>
			@foreach (var row in pagination.List)
			{
				<tr>
					<td class="min">
						@{ string editUrl = Url.Action("Edit", new { row.RoleId }); }
		                @if (canEdit)
		                { <a class="btn btn-warning btn-xs btn-icon" href="@editUrl"><i class="fa fa-pencil fa-lg"></i></a> }
		                else
		                { <b class="btn btn-warning btn-xs btn-icon disabled" title="權限不足"><i class="fa fa-pencil fa-lg"></i></b> }
					</td>
					<td class="RoleName min">@row.RoleName</td>
					<td class="AllowActList mark-tag">@Html.ShowItem(row.AllowActList, actItems)</td>
					<td class="UserIds mark-tag">@Html.ShowItem(row.UserIds, Items.UserName)</td>
					<td class="Status mark-label min">@Html.ShowItem(row.UseStatus)</td>
				</tr>
			}
		</tbody>
	</table>

	@await Html.PageEmptyAlert(pagination)
</div>


<div class="text-center" ext-horizontal-fix="">
	<ul class="pagination pagination-sm">@Html.PagerLinks(pagination)</ul>
</div>
