// ------------------------------------------------------------------------------
// <auto-generated>
//     這段程式碼是由工具產生的。
//     執行階段版本: 16.0.0.0
//  
//     變更這個檔案可能會導致不正確的行為，而且如果已重新產生
//     程式碼，則會遺失變更。
// </auto-generated>
// ------------------------------------------------------------------------------
namespace CodeGenerator.Templates.Wcf
{
    using System.Linq;
    using CodeGenerator.Models;
    using System;
    
    /// <summary>
    /// Class to produce the template output
    /// </summary>
    
    #line 1 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "16.0.0.0")]
    public partial class DaoTemplate : CodeGenerator.Templates.TemplateBase
    {
#line hidden
        /// <summary>
        /// Create the template output
        /// </summary>
        public override string TransformText()
        {
            
            #line 4 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 
	string className = TableMeta.Name + "Dao";
	FilePath = TableMeta.NameSpace + ".Dao/Impl/" + className + ".cs";

            
            #line default
            #line hidden
            this.Write("using JustWin.API;\r\nusing JustWin.API.Extensions;\r\nusing JustWin.API.Models;\r\nusi" +
                    "ng ");
            
            #line 11 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.NameSpace));
            
            #line default
            #line hidden
            this.Write(".Dao.Database;\r\nusing ");
            
            #line 12 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.NameSpace));
            
            #line default
            #line hidden
            this.Write(".Domain;\r\nusing ");
            
            #line 13 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.NameSpace));
            
            #line default
            #line hidden
            this.Write(".Domain.Enums;\r\nusing System;\r\nusing System.Collections.Generic;\r\nusing System.Li" +
                    "nq;\r\n\r\n\r\nnamespace ");
            
            #line 19 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.NameSpace));
            
            #line default
            #line hidden
            this.Write(".Dao.Impl\r\n{\r\n\t/// <summary>");
            
            #line 21 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Description));
            
            #line default
            #line hidden
            this.Write("</summary>\r\n\tpublic class ");
            
            #line 22 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(className));
            
            #line default
            #line hidden
            this.Write(" : I");
            
            #line 22 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(className));
            
            #line default
            #line hidden
            this.Write("\r\n\t{\r\n\t\tprivate ");
            
            #line 24 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(DataContextName));
            
            #line default
            #line hidden
            this.Write(" _dc;\r\n\r\n\t\tpublic ");
            
            #line 26 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(className));
            
            #line default
            #line hidden
            this.Write("(");
            
            #line 26 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(DataContextName));
            
            #line default
            #line hidden
            this.Write(" dc)\r\n\t\t{\r\n\t\t\t_dc = dc;\r\n\t\t}\r\n\r\n\r\n\t\t//TODO 程式產生未完成\r\n\t\t//public Dictionary<int, st" +
                    "ring> GetDic(string status = null)\r\n\t\t//{\r\n\t\t//\tIQueryable<");
            
            #line 35 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.TableName));
            
            #line default
            #line hidden
            this.Write("> query = _dc.");
            
            #line 35 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.TableName));
            
            #line default
            #line hidden
            this.Write(";\r\n\t\t//\tquery = query.WhereHas(x => x.UseStatus == status);\r\n\r\n\t\t//\tvar items = q" +
                    "uery.ToDictionary(x => x.");
            
            #line 38 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Name));
            
            #line default
            #line hidden
            this.Write(", x => x.");
            
            #line 38 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write(@"Name);
		//	return items;
		//}


		//TODO 程式產生未完成
		//public Dictionary<string, string> GetStatusItems()
		//{
		//	var items = new Dictionary<string, string>
		//	{
		//		{ ""y"", ""開啟"" },
		//		{ ""n"", ""關閉"" },
		//	};
		//	return items;
		//}

		private ");
            
            #line 54 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain toDomain(_");
            
            #line 54 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write(" data)\r\n\t\t{\r\n\t\t\tif(data == null) { return null; }\r\n\r\n\t\t\tvar domain = new ");
            
            #line 58 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain \r\n\t\t\t{\r\n");
            
            #line 60 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 foreach(var col in TableMeta.Columns) { 
	   if(col.IsEnum) 
	   { WriteLine("\t\t\t\t{0} = data.{0}.ToEnum<{0}>(),", col.Name); }
	   else
	   { WriteLine("\t\t\t\t{0} = data.{0},", col.Name); }
} 
            
            #line default
            #line hidden
            this.Write("\t\t\t};\t\t\t\r\n\r\n\t\t\treturn domain;\r\n\t\t}\r\n\r\n\r\n\t\tprivate Func<_");
            
            #line 72 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write(", ");
            
            #line 72 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain> prepareToDomain(IEnumerable<_");
            
            #line 72 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write(@"> list)
		{
//            int[] roleIds = list.ToArray(x => x.RoleId);
//
//            Func<int, List<int>> getUserIds = _dc.AMS_UserRole
//                .WhereIn(x => x.RoleId, roleIds)
//                .OrderBy(x => x.UserId)
//                .PrepareList(x => x.RoleId, x => x.UserId);

			return data =>
			{
				if (data == null) { return null; }

				");
            
            #line 85 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain domain = toDomain(data);\r\n\t\t\t\t//domain.UserIds = getUserIds(data.RoleId);\r" +
                    "\n\t\t\t\treturn domain;\r\n\t\t\t};\r\n\t\t}\r\n\r\n\r\n\t\tprivate IQueryable<_");
            
            #line 92 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("> getQuery(WhereParams<");
            
            #line 92 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain> findParam = null)\r\n\t\t{\r\n\t\t\tIQueryable<_");
            
            #line 94 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("> query =\r\n\t\t\t\tfrom x in _dc.");
            
            #line 95 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.TableName));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\tselect new _");
            
            #line 96 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t{\r\n");
            
            #line 98 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 foreach(var col in TableMeta.Columns) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t");
            
            #line 99 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(col.Name));
            
            #line default
            #line hidden
            this.Write(" = x.");
            
            #line 99 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(col.Name));
            
            #line default
            #line hidden
            this.Write(",\r\n");
            
            #line 100 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t};\r\n\r\n\r\n\t\t\tif (findParam == null) { return query; }\r\n\r\n\t\t\tquery = query.Where" +
                    "Builder(findParam)\r\n");
            
            #line 107 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 foreach(var col in TableMeta.Columns) { 
	if(col.IsEnum) 
	{ WriteLine("\t\t\t\t.WhereBind(x => x.{0}.ToString(), y => y.{0})", col.Name); }
	else
	{ WriteLine("\t\t\t\t.WhereBind(x => x.{0}, y => y.{0})", col.Name); }
} 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t.Build();\r\n\r\n\t\t\treturn query;\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\t\t//TODO 程式產生未完成\r\n\t\tpublic Pagina" +
                    "tion<");
            
            #line 122 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain> GetPagination(WhereParams<");
            
            #line 122 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain> findParam, PageParams<");
            
            #line 122 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain> pageParams)\r\n\t\t{\r\n\t\t\tIQueryable<_");
            
            #line 124 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("> query = getQuery(findParam);\r\n\r\n\r\n\t\t\tif (pageParams == null) { pageParams = Pag" +
                    "eParams<");
            
            #line 127 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain>.Unlimited(); }\r\n\r\n\t\t\tbool isDesc = pageParams.Descending;\r\n\t\t\ttry\r\n\t\t\t{\r\n" +
                    "\t\t\t\tquery = query.OrderBy(pageParams.OrderField, isDesc);\r\n\t\t\t}\r\n\t\t\tcatch (Excep" +
                    "tion)\r\n\t\t\t{\r\n\t\t\t\tquery = query.OrderBy(x => x.");
            
            #line 136 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Name));
            
            #line default
            #line hidden
            this.Write(", isDesc);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar result = query.AsPagination(pageParams.PageIndex, pa" +
                    "geParams.PageSize);\r\n\r\n\t\t\tFunc<_");
            
            #line 142 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write(", ");
            
            #line 142 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain> toDomain = prepareToDomain(result.List);\r\n\t\t\treturn result.As(x => toDoma" +
                    "in(x));\r\n\t\t}\r\n\r\n\t\t\r\n\r\n\t\t//TODO 程式產生未完成\r\n\t\t//public List<");
            
            #line 149 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain> GetList(WhereParams<");
            
            #line 149 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain> findParam = null)\r\n\t\t//{\r\n\t\t//    List<_");
            
            #line 151 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("> list = getQuery(findParam).ToList();\r\n\t\t//\r\n\t\t//    Func<_");
            
            #line 153 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write(", ");
            
            #line 153 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain> toDomain = prepareToDomain(list);\r\n\t\t//    return list.ToList(x => toDoma" +
                    "in(x));\r\n\t\t//}\r\n\r\n\r\n\t\t//TODO 程式產生未完成\r\n\t\tpublic ");
            
            #line 159 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain GetById(");
            
            #line 159 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.CodeType));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 159 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Variable));
            
            #line default
            #line hidden
            this.Write(")\r\n\t\t{\r\n\t\t\t_");
            
            #line 161 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write(" data = getQuery().FirstOrDefault(x => x.");
            
            #line 161 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Name));
            
            #line default
            #line hidden
            this.Write(" == ");
            
            #line 161 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Variable));
            
            #line default
            #line hidden
            this.Write(");\r\n\t\t\tif (data == null) { return null; }\r\n\r\n\t\t\tFunc<_");
            
            #line 164 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write(", ");
            
            #line 164 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain> toDomain = prepareToDomain(new[] { data });\r\n\t\t\t");
            
            #line 165 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain domain = toDomain(data);\r\n\r\n\t\t\treturn domain;\r\n\t\t}\r\n\r\n\r\n\r\n\t\t//TODO 程式產生未完成" +
                    "\r\n\t\tpublic int Save(");
            
            #line 173 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write("Domain domain)\r\n\t\t{\r\n\t\t\t");
            
            #line 175 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.TableName));
            
            #line default
            #line hidden
            this.Write(" data;\r\n\r\n\t\t\tif (domain.");
            
            #line 177 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Name));
            
            #line default
            #line hidden
            this.Write(" > 0)\r\n\t\t\t{\r\n\t\t\t\tdata = _dc.");
            
            #line 179 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.TableName));
            
            #line default
            #line hidden
            this.Write(".FirstOrDefault(x => x.");
            
            #line 179 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Name));
            
            #line default
            #line hidden
            this.Write(" == domain.");
            
            #line 179 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Name));
            
            #line default
            #line hidden
            this.Write(");\r\n\t\t\t\tChecker.Has(data, \"");
            
            #line 180 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Description));
            
            #line default
            #line hidden
            this.Write("不存在無法修改\");\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tdata = new ");
            
            #line 184 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.TableName));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t\t{\r\n");
            
            #line 186 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 foreach(var col in WithColumns("CreateBy")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t");
            
            #line 187 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(col.Name));
            
            #line default
            #line hidden
            this.Write(" = domain.ModifyBy,\r\n");
            
            #line 188 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 } 
            
            #line default
            #line hidden
            
            #line 189 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 foreach(var col in WithColumns("CreatedBy")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t");
            
            #line 190 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(col.Name));
            
            #line default
            #line hidden
            this.Write(" = domain.ModifiedBy,\r\n");
            
            #line 191 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 } 
            
            #line default
            #line hidden
            
            #line 192 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 foreach(var col in WithColumns("CreateDate", "CreatedDate")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t\t");
            
            #line 193 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(col.Name));
            
            #line default
            #line hidden
            this.Write(" = DateTime.Now,\r\n");
            
            #line 194 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\t\t\t\t};\r\n\t\t\t\t_dc.");
            
            #line 196 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.TableName));
            
            #line default
            #line hidden
            this.Write(".InsertOnSubmit(data);\r\n\t\t\t}\r\n\r\n");
            
            #line 199 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 foreach(var col in ActiveColumns.Where(x => x.Name != TableMeta.PK.Name)) {
	   if(col.IsEnum) 
	   { WriteLine("\t\t\tdata.{0} = domain.{0}.ToString();", col.Name); }
	   else
	   { WriteLine("\t\t\tdata.{0} = domain.{0};", col.Name); }
} 
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 206 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 foreach(var col in WithColumns("ModifyBy", "ModifiedBy")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tdata.");
            
            #line 207 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(col.Name));
            
            #line default
            #line hidden
            this.Write(" = domain.");
            
            #line 207 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(col.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n");
            
            #line 208 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 } 
            
            #line default
            #line hidden
            
            #line 209 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 foreach(var col in WithColumns("ModifyDate", "ModifiedDate")) { 
            
            #line default
            #line hidden
            this.Write("\t\t\tdata.");
            
            #line 210 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(col.Name));
            
            #line default
            #line hidden
            this.Write(" = DateTime.Now;\r\n");
            
            #line 211 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
 } 
            
            #line default
            #line hidden
            this.Write("\r\n\t\t\t_dc.SubmitChanges();\r\n\r\n\r\n\t\t\treturn data.");
            
            #line 216 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n\t\t}\r\n\r\n\r\n\r\n\t\tpublic void Delete(");
            
            #line 221 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.CodeType));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 221 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Variable));
            
            #line default
            #line hidden
            this.Write(", int modifyBy)\r\n\t\t{\r\n\t\t\t_dc.");
            
            #line 223 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.TableName));
            
            #line default
            #line hidden
            this.Write(".DeleteAllOnSubmit(x => x.");
            
            #line 223 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Name));
            
            #line default
            #line hidden
            this.Write(" == ");
            
            #line 223 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Variable));
            
            #line default
            #line hidden
            this.Write(");\r\n\r\n\t\t\t_dc.SubmitChanges();\r\n\t\t}\r\n\r\n\r\n\t\t//TODO 程式產生未完成\r\n\t\t//public bool IsXxxDu" +
                    "plicate(");
            
            #line 230 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.CodeType));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 230 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Variable));
            
            #line default
            #line hidden
            this.Write(", string xxx)\r\n\t\t//{\r\n\t\t//\treturn _dc.");
            
            #line 232 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.TableName));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t//\t\t.Where(x => x. ");
            
            #line 233 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Name));
            
            #line default
            #line hidden
            this.Write(" != ");
            
            #line 233 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.PK.Variable));
            
            #line default
            #line hidden
            this.Write(")\r\n\t\t//\t\t.Where(x => x.Xxx == xxx)\r\n\t\t//\t\t.Any();\r\n\t\t//}\r\n\r\n\r\n\r\n\t\t/*#############" +
                    "#########################################################*/\r\n\r\n\t\tprivate class _" +
                    "");
            
            #line 242 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.Name));
            
            #line default
            #line hidden
            this.Write(" : ");
            
            #line 242 "D:\Jax-Work\Dropbox\JW-Project\CoreTpl\CodeGenerator\Templates\Wcf\DaoTemplate.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(TableMeta.TableName));
            
            #line default
            #line hidden
            this.Write("\r\n\t\t{\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n}\r\n");
            return this.GenerationEnvironment.ToString();
        }
    }
    
    #line default
    #line hidden
}
